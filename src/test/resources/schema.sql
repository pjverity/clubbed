SET SCHEMA APP;

CREATE SEQUENCE HIBERNATE_SEQUENCE START WITH 0 INCREMENT BY 1;

CREATE TABLE users
(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 0, INCREMENT BY 1),
  username VARCHAR(128) UNIQUE NOT NULL,
  password VARCHAR(64) NOT NULL,
  enabled BOOLEAN DEFAULT true NOT NULL
);

CREATE TABLE user_details
(
  first_name VARCHAR(32),
  last_name VARCHAR(64),
  username VARCHAR(128) REFERENCES users(username),
  last_login TIMESTAMP WITH DEFAULT CURRENT TIMESTAMP
);

CREATE TABLE purchases
(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 0, INCREMENT BY 1),
  username VARCHAR(128) REFERENCES users (username),
  purchaseTimestamp TIMESTAMP WITH DEFAULT CURRENT TIMESTAMP,
  quantity INTEGER
);
